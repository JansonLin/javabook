#### 3.3.5 断言

编写代码时，我们总是会做出一些假设，断言就是用于在代码中捕捉 这些假设可以将断言看作是异常处理的一种高级形式。

断言表示为一些布尔表达式，程序员相信在程序中的某个特定点该表 达式值为真。可以在任何时候启用和禁用断言验证，因此可以在测试时启用断言而在部署时禁用断言。同样，程序投入运行后，最终用户在遇到问题时可以重新起用断言。 

使用断言可以创建更稳定，品质更好且易于除错的代码，当需要在一个值为FALSE时中断当前操作的话，可以使用断言。单元测试必须使用断言（Junit/JunitX），除了类型检查和单元测试外，断言还提供了一种确定个种特性是否在程序中得到维护的极好的方法，使用断言使我们向按契约式设计更近了一步。

常见的断言具有以下特性：

* 前置条件断言：代码执行之前必须具备的特性。

* 后置条件断言：代码执行之后必须具备的特性

* 前后不变断言：代码执行前后不能变化的特性

断言的使用方式如下： assert Expression1 或 assert Expression1:Expression2 

其中 Expression1 应该总是一个布尔值，Expression2 是断言失败时输 出的失败消息的字符串。如果 Expression1 为假，则抛出一个 AssertionError， 这是一个错误，而不是一个异常，也就是说是一个不可控制异常 （unchecked Exception\),AssertionError 由于是错误，所以可以不捕获，但 不推荐这样做，因为那样会使你的系统进入不稳定状态。 

断言在默认情况下是关闭的，要在编译时启用断言，需要使用source1.4标记即：javac –source 1.4 Test.java ,在运行时启用断言需要使用-ea参数 。要在系统类中启用和禁用断言可以使用-esa和-dsa参数。

##### 需要使用断言的情况

* 可以在预计正常情况下程序不会到达的地方放置断言 ：assert false。 
* 断言可以用于检查传递给私有方法的参数。（对于公有方法，因为是提 供给外部的接口，所以必须在方法中有相应的参数检验才能保证代码 的健壮性）。
* 使用断言测试方法执行的前置条件和后置条件。 
* 使用断言检查类的不变状态，确保任何情况下，某个变量的状态必须 满足。（如 age 属性应大于 0 小于某个合适值）

##### 使用示例

```
public class AssertExampleOne{
    public static void main(String args[]){
        int x=10;
        System.out.println("Testing Assertion that x==100");
        assert x=100:"Out assertion failed!";
        System.out.println("Test passed!");
    }
}
```



